name: Backup Staging Database

on:
  schedule:
    - cron: '0 2 * * *'
  workflow_dispatch:

jobs:
  call-backup:
    uses: ./.github/workflows/_backup-engine.yaml
    with:
      environment: staging
      bucket: db-backups
    secrets:
      SUPABASE_DB_URL: ${{ secrets.SUPABASE_DB_URL }}
      SUPABASE_SERVICE_ROLE_KEY: ${{ secrets.SUPABASE_SERVICE_ROLE_KEY }}
      SUPABASE_STORAGE_URL: ${{ secrets.SUPABASE_STORAGE_URL }}
